<routes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://camel.apache.org/schema/spring"
        xsi:schemaLocation="
            http://camel.apache.org/schema/spring
            http://camel.apache.org/schema/spring/camel-spring.xsd">
     <route id="discoverPaymentsConsentsRoute">
        <from uri="direct:discoverPaymentsConsents"/>
        <to uri="direct:getMockError"/>
    </route>
    <route id="paymentsPostPixPaymentsRoute">
        <from uri="direct:paymentsPostPixPayments"/>
        <unmarshal>
            <json library="Gson"/>
        </unmarshal>
        <to uri="velocity:file://work/models/request.vm?allowContextMapAll=true"/>
        <setHeader name="Content-Type">
            <constant>application/json</constant>
        </setHeader>
        <to uri="{{env:ROUTE_CREATE_PIX}}?bridgeEndpoint=true&amp;throwExceptionOnFailure=false&amp;httpMethod=POST"/>
        <choice>
            <when>
                <simple>${header.CamelHttpResponseCode} in '200,201,202'</simple>
                <unmarshal>
                    <json library="Gson"/>
                </unmarshal>
                <to uri="velocity:file://work/models/response.vm?allowContextMapAll=true"/>
                <setHeader name="CamelHttpResponseCode">
                    <constant>201</constant>
                </setHeader>
            </when>
            <otherwise>
                <to uri="direct:getMockError"/>
            </otherwise>
        </choice>        
    </route>
    <route id="paymentsGetPixPaymentsPaymentIdRoute">
        <from uri="direct:paymentsGetPixPaymentsPaymentId"/>
        <to uri="direct:getMockError"/>
    </route>
    <route id="getMockError">
        <from uri="direct:getMockError"/>
        <to uri="velocity:file://work/error/response-error-example.json?allowContextMapAll=true&amp;encoding=UTF-8"/>
        <setHeader name="CamelHttpResponseCode">
            <constant>500</constant>
        </setHeader>
    </route>
</routes>