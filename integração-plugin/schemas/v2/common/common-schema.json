{
    "$schema": "https://json-schema.org/draft-07/schema",
    "$defs": {
        "RevokeSchedulePix": {
            "type": "object",
            "description": "Objeto que contém as informações das circunstância da revogação. [Restrição] O campo loggedUser deve ser preenchido quando a revogação for feita pelo usuário final, ou seja, se o campo data.revocation.revokedBy estiver com o valor 'USER'",
            "required": [
                "revokedBy",
                "reason"
            ],
            "properties": {
                "loggedUser": {
                    "$ref": "./consent/common-consent-schema.json#/$defs/LoggedUser"
                },
                "revokedBy": {
                    "type": "string",
                    "maxLength": 8,
                    "enum": [
                        "USER",
                        "ASPSP",
                        "TPP"
                    ],
                    "description": "Define qual das partes envolvidas na transação está realizando a revogação. Valores possíveis: \n- USER - Revogado pelo usuário\n- ASPSP - Provedor de serviços de pagamento para serviços de conta - Detentora de conta\n- TPP - Instituições Provedoras - iniciadora de pagamentos",
                    "examples": [
                        "TPP"
                    ]
                },
                "reason": {
                    "$ref": "#/$defs/RevocationReason"
                }
            },
            "additionalProperties": false
        },
        "RevocationReason": {
            "type": "object",
            "description": "Define a razão pela qual o consentimento foi revogado.",
            "required": [
                "code"
            ],
            "properties": {
                "code": {
                    "type": "string",
                    "description": "Define o código da razão pela qual o consentimento foi revogado. Valores possíveis:\n- FRAUD - Indica suspeita de fraude\n- ACCOUNT_CLOSURE - Indica que a conta do usuário foi encerrada\n- OTHER - Indica que motivo do cancelamento está fora dos motivos pré-estabelecidos.",
                    "maxLength": 22,
                    "enum": [
                        "FRAUD",
                        "ACCOUNT_CLOSURE",
                        "OTHER"
                    ],
                    "examples": [
                        "FRAUD"
                    ]
                },
                "additionalInformation": {
                    "type": "string",
                    "description": "Contém informações adicionais definidas pelo requisitante da revogação. [Restrição] Obrigatório quando o campo revokedBy for igual a TPP ou ASPSP e o motivo de revogação for OTHER.",
                    "maxLength": 140,
                    "pattern": "[\\w\\W\\s]*",
                    "examples": [
                        "Suspeita de fraude"
                    ]
                }
            },
            "additionalProperties": false
        },
        "BrandId": {
            "type": "string",
            "description": "Identificador da marca reportada pelo participante do Open Banking",
            "examples": [
                "cbanco"
            ],
            "minLength": 1,
            "maxLength": 50
        },
        "IdempotencyKey": {
            "type": "string",
            "description": "Identificador de solicitação exclusivo para suportar a idempotência. Deve ser tratado em todos os requests onde estiver presente. Um segundo request recebido como mesmo IdempotencyKey não deve realizar novamente as alterações feitas pelo primeiro e não deve retornar erro. Este campo é sensível à requests processados em paralelo",
            "maxLength": 40,
            "pattern": "^(?!\\s)(.*)(\\S)$",
            "examples": [
                "TXpRMU9UQTROMWhZV2xSU1FUazJSMDl"
            ]
        },
        "Guid": {
            "type": "string",
            "description": "campo no formato GUID",
            "examples": [
                "49fe29f1-95a9-4521-8f48-a9700e392b48"
            ],
            "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$",
            "maxLength": 36
        },
        "RequestMeta": {
            "type": "object",
            "description": "Objeto que contém dados referentes ao contexto no qual o request for recebido",
            "required": [
                "correlationId",
                "brandId"
            ],
            "properties": {
                "correlationId": {
                    "type": "string",
                    "description": "UUID que identifica o correlation ID da requisição realizada. Deve ser propagado para todas as chamadas feitas entre sistemas e logado sempre que possível para facilitar o trace de erros",
                    "format": "uuid",
                    "examples": [
                        "97623ed1-4732-4bf2-8d4b-ae7aced5443b"
                    ]
                },
                "brandId": {
                    "$ref": "#/$defs/BrandId"
                }
            },
            "additionalProperties": false
        }
    }
}